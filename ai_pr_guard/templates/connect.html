{% extends "base.html" %}
{% block content %}

<article>
  <h2><i class="fab fa-github"></i> Connect to GitHub</h2>
  <p class="muted" style="margin-bottom: 1.5rem;">
    Paste a GitHub Personal Access Token (PAT). It will be stored locally in your user config directory.
  </p>

  <form method="post" action="/connect">
    <div style="max-width: 500px;">
      <label for="token">
        <i class="fas fa-key"></i> GitHub Token
        <span class="muted" style="font-weight: normal; font-size: 0.875rem;"> (ghp_... or github_pat_...)</span>
      </label>
      <input 
        type="password" 
        name="token" 
        id="token" 
        placeholder="Paste your GitHub token here" 
        required 
        style="width: 100%;"
      />
      
      <div style="margin-top: 1.5rem;">
        <button type="submit">
          <i class="fas fa-plug"></i> Connect
        </button>
      </div>
    </div>
  </form>

  {% if me %}
    <div style="margin-top: 1.5rem; padding: 1rem; background: #d1fae5; border-radius: 8px; border-left: 4px solid #10b981;">
      <p style="margin: 0; color: #065f46;">
        <i class="fas fa-check-circle"></i>
        <strong>Successfully connected!</strong> Logged in as <code>{{ me.login }}</code>
      </p>
    </div>
  {% endif %}
</article>

<article>
  <h3><i class="fas fa-info-circle"></i> How to get a GitHub Token</h3>
  <div style="display: flex; flex-direction: column; gap: 1rem;">
    <div style="display: flex; gap: 1rem; align-items: flex-start;">
      <div style="background: var(--primary-light); width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
        <span style="color: var(--primary); font-weight: 600;">1</span>
      </div>
      <div>
        <strong>Go to GitHub Settings</strong>
        <p class="muted" style="margin: 0;">Visit <a href="https://github.com/settings/tokens" target="_blank">github.com/settings/tokens</a></p>
      </div>
    </div>
    <div style="display: flex; gap: 1rem; align-items: flex-start;">
      <div style="background: var(--primary-light); width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
        <span style="color: var(--primary); font-weight: 600;">2</span>
      </div>
      <div>
        <strong>Generate a new token</strong>
        <p class="muted" style="margin: 0;">Click "Generate new token (classic)" and give it a descriptive name.</p>
      </div>
    </div>
    <div style="display: flex; gap: 1rem; align-items: flex-start;">
      <div style="background: var(--primary-light); width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
        <span style="color: var(--primary); font-weight: 600;">3</span>
      </div>
      <div>
        <strong>Select scopes</strong>
        <p class="muted" style="margin: 0;">For full functionality, select the <code>repo</code> scope.</p>
      </div>
    </div>
    <div style="display: flex; gap: 1rem; align-items: flex-start;">
      <div style="background: var(--primary-light); width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
        <span style="color: var(--primary); font-weight: 600;">4</span>
      </div>
      <div>
        <strong>Copy and paste</strong>
        <p class="muted" style="margin: 0;">Copy the generated token and paste it above.</p>
      </div>
    </div>
  </div>
</article>

{% endblock %}
